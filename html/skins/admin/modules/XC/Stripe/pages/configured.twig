<div class="stripe configured">

  {% if this.paymentMethod.getReferralPageURL() %}
    <div class="note">
      {{ t('Don\'t have an account?') }}
      <span class="external"><a href="{{ this.paymentMethod.getReferralPageURL() }}" target="_blank">{{ t('Sign Up Now') }}</a> <i class="icon fa fa-external-link"></i></span>
    </div>
  {% endif %}

  <p class="note">{{ t('Copy Webhook URL and go to Account settings')|raw }}</p>

  <div class="webhook">
    <div class="url">
      {{ widget('XLite\\View\\Button\\CopyLink', copy=this.paymentMethod.getWebhookURL()) }}
      {{ this.paymentMethod.getWebhookURL() }}
    </div>
    <div class="help-wrapper">
      {{ widget('XLite\\View\\Tooltip', text=t('Webhook URL is your store\'s URL through which Stripe informs your store about any changes in the order'), isImageTag='true', className='help-icon') }}
    </div>
  </div>

  <div class="instruction non-visible">
    <a href="#" class="switcher switcher-show">{{ t('Show "How to use" instruction') }}</a>
    <a href="#" class="switcher switcher-hide">{{ t('Hide "How to use" instruction') }}</a>

    <ul>
      <li class="step-1">
        <div class="number">1</div>
        <p>{{ t('Open the page "Webhooks" in the "Developers" section of dashboard.stripe.com: https://dashboard.stripe.com/account/webhooks')|raw }}</p>
      </li>
      <li class="step-2">
        <div class="number">2</div>
        <p>{{ t('In the section "Endpoints receiving events from your account", click "+ Add endpoint".')|raw }}</p>
      </li>
      <li class="step-3">
        <div class="number">3</div>
        <p>{{ t('In the form that opens, paste the "Webhook URL" value into the field "URL to be called" and click "Add endpoint".')|raw }}</p>
      </li>

      <li class="more">
        <p>{{ t('More information on the setup of webhooks is available here: https://stripe.com/docs/webhooks#configuring-your-webhook-settings')|raw }}</p>
      </li>
    </ul>
  </div>

  <ul class="table model-properties settings-table stripe-settings">
    <li>
      {{ widget('XLite\\View\\FormField\\Input\\Text',
        fieldName='settings[accessToken]',
        value=this.paymentMethod.getSetting('accessToken'),
        label=t('Secret key')
      ) }}
    </li>
    <li>
      {{ widget('XLite\\View\\FormField\\Input\\Text',
        fieldName='settings[publishKey]',
        value=this.paymentMethod.getSetting('publishKey'),
        label=t('Publishable key')
      ) }}
    </li>
    <li>
      {{ widget('XLite\\View\\FormField\\Input\\Text',
        fieldName='settings[accessTokenTest]',
        value=this.paymentMethod.getSetting('accessTokenTest'),
        label=t('Secret key (test mode)')
      ) }}
    </li>
    <li>
      {{ widget('XLite\\View\\FormField\\Input\\Text',
        fieldName='settings[publishKeyTest]',
        value=this.paymentMethod.getSetting('publishKeyTest'),
        label=t('Publishable key (test mode)')
      ) }}
    </li>
    <li>
      {{ widget('XLite\\Module\\XC\\Stripe\\View\\FormField\\Select\\TransactionType',
        fieldName='settings[type]',
        value=this.paymentMethod.getSetting('type'),
        label=t('Transaction type')
      ) }}
    </li>
    <li>
      {{ widget('XLite\\View\\FormField\\Select\\TestLiveMode',
        fieldName='settings[mode]',
        value=this.paymentMethod.getSetting('mode'),
        label=t('Test/Live mode')
      ) }}
    </li>
    <li>
      {{ widget('XLite\\View\\FormField\\Input\\Text',
        fieldName='settings[prefix]',
        value=this.paymentMethod.getSetting('prefix'),
        label=t('Invoice number prefix')
      ) }}
    </li>
  </ul>
</div>

{{ widget('\\XLite\\Module\\XC\\Stripe\\View\\StickyPanel\\Payment\\Configured') }}
